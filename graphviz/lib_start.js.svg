
                <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="992" height="1417" shape-rendering="optimizeSpeed">
                
                <g>
                   <rect x="50" y="65" width="248.4" height="30" rx="3" ry="3" style="fill:#90caf9; stroke:#444; stroke-width:1"></rect>
                   <title>const path = require('path')</title>
            <text x="65" y="85" font-family="monospace" font-size="13" fill="#222">
                <tspan x="65" y="85">const path = require('path')</tspan>
            </text>
                   
                   
                </g>
            <g>
                <rect x="50" y="128.5" width="315.2" height="30" style="fill:#a5d6a7; stroke:#444; stroke-width:1"></rect>
                    
                <line x1="60" y1="128.5" x2="60" y2="158.5" style="fill:#a5d6a7; stroke:#444; stroke-width:1"></line>
                <line x1="355.2" y1="128.5" x2="355.2" y2="158.5" style="fill:#a5d6a7; stroke:#444; stroke-width:1"></line>
             
                <title>module.exports = (options = {}) =&gt;</title>
            <text x="75" y="148.5" font-family="monospace" font-size="13" fill="#222">
                <tspan x="75" y="148.5">module.exports = (options = {}) =&gt;</tspan>
            </text>
                
            </g><g>
            <rect x="117" y="192" width="247.2" height="30" rx="3" ry="3" style="fill:#ce93d8; stroke:#444; stroke-width:1"></rect>                
            <polygon points="87,207 117,177 147,207 117,237" style="fill:#ce93d8; stroke:#444; stroke-width:1"></polygon>
            <title>(!options.ignoreWarning)</title>
            <text x="162" y="212" font-family="monospace" font-size="13" fill="#222">
                <tspan x="162" y="212">(!options.ignoreWarning)</tspan>
            </text>
            
            <text x="109.2" y="212" font-family="monospace" font-size="13" fill="#222">if</text> <text x="124.8" y="238.95" font-family="monospace" font-size="13" fill="#222">+</text> 
        </g>
                <g>
                   <rect x="137" y="247" width="443.4" height="30" rx="2" ry="2" style="fill:#C5E1A5; stroke:#444; stroke-width:1"></rect>
                   <title>console.warn('single process mode is still in experiment, please don't use it in production environment')</title>
            <text x="152" y="267" font-family="monospace" font-size="13" fill="#222">
                <tspan x="152" y="267">console.warn('single process mode is still in expe...</tspan>
            </text>
                   
                   
                </g>
                <g>
                   <rect x="87" y="297" width="420" height="30" rx="3" ry="3" style="fill:#90caf9; stroke:#444; stroke-width:1"></rect>
                   <title>options.baseDir = options.baseDir || process.cwd()</title>
            <text x="102" y="317" font-family="monospace" font-size="13" fill="#222">
                <tspan x="102" y="317">options.baseDir = options.baseDir || process.cwd()</tspan>
            </text>
                   
                   
                </g>
                <g>
                   <rect x="124" y="345.5" width="131.39999999999998" height="30" rx="2" ry="2" style="fill:#C5E1A5; stroke:#444; stroke-width:1"></rect>
                   <title>process.cwd()</title>
            <text x="139" y="365.5" font-family="monospace" font-size="13" fill="#222">
                <tspan x="139" y="365.5">process.cwd()</tspan>
            </text>
                   
                   
                </g>
                <g>
                   <rect x="87" y="394" width="209.4" height="30" rx="3" ry="3" style="fill:#90caf9; stroke:#444; stroke-width:1"></rect>
                   <title>options.mode = 'single'</title>
            <text x="102" y="414" font-family="monospace" font-size="13" fill="#222">
                <tspan x="102" y="414">options.mode = 'single'</tspan>
            </text>
                   
                   
                </g><g>
            <rect x="117" y="457.5" width="216" height="30" rx="3" ry="3" style="fill:#ce93d8; stroke:#444; stroke-width:1"></rect>                
            <polygon points="87,472.5 117,442.5 147,472.5 117,502.5" style="fill:#ce93d8; stroke:#444; stroke-width:1"></polygon>
            <title>(!options.framework)</title>
            <text x="162" y="477.5" font-family="monospace" font-size="13" fill="#222">
                <tspan x="162" y="477.5">(!options.framework)</tspan>
            </text>
            
            <text x="109.2" y="477.5" font-family="monospace" font-size="13" fill="#222">if</text> <text x="124.8" y="504.45" font-family="monospace" font-size="13" fill="#222">+</text> 
        </g>
                <g>
                   <rect x="137" y="512.5" width="53.4" height="30" rx="2" ry="2" style="fill:#FFE082; stroke:#444; stroke-width:1"></rect>
                   <title>try</title>
            <text x="152" y="532.5" font-family="monospace" font-size="13" fill="#222">
                <tspan x="152" y="532.5">try</tspan>
            </text>
                   
                   
                </g>
                <g>
                   <rect x="174" y="561" width="443.4" height="30" rx="3" ry="3" style="fill:#90caf9; stroke:#444; stroke-width:1"></rect>
                   <title>options.framework = require(path.join(options.baseDir, 'package.json')).egg.framework</title>
            <text x="189" y="581" font-family="monospace" font-size="13" fill="#222">
                <tspan x="189" y="581">options.framework = require(path.join(options.base...</tspan>
            </text>
                   
                   
                </g>
                <g>
                   <rect x="211" y="609.5" width="443.4" height="30" rx="2" ry="2" style="fill:#C5E1A5; stroke:#444; stroke-width:1"></rect>
                   <title>require(path.join(options.baseDir, 'package.json'))</title>
            <text x="226" y="629.5" font-family="monospace" font-size="13" fill="#222">
                <tspan x="226" y="629.5">require(path.join(options.baseDir, 'package.json')...</tspan>
            </text>
                   
                   
                </g>
            <g>
                <rect x="174" y="658" width="100.2" height="30" rx="2" ry="2" style="fill:#ef9a9a; stroke:#444; stroke-width:1"></rect>
                
                <line x1="274.2" y1="671" x2="276.2" y2="671" style="fill:#ef9a9a; stroke:#444; stroke-width:1"></line>
                
                <line x1="274.2" y1="675" x2="276.2" y2="675" style="fill:#ef9a9a; stroke:#444; stroke-width:1"></line>

                <path d="M276.2, 659 L292.2, 673 L276.2, 687 Z" fill="#ef9a9a" stroke="#444" stroke-width="1"></path>
                             
                <title>catch (_)</title>
            <text x="189" y="678" font-family="monospace" font-size="13" fill="#222">
                <tspan x="189" y="678">catch (_)</tspan>
            </text>
                
            </g>
                <g>
                   <rect x="211" y="706.5" width="37.8" height="30" rx="3" ry="3" style="fill:#90caf9; stroke:#444; stroke-width:1"></rect>
                   <title>_</title>
            <text x="226" y="726.5" font-family="monospace" font-size="13" fill="#222">
                <tspan x="226" y="726.5">_</tspan>
            </text>
                   
                   
                </g><g>
            <rect x="117" y="771.5" width="208.2" height="30" rx="3" ry="3" style="fill:#ce93d8; stroke:#444; stroke-width:1"></rect>                
            <polygon points="87,786.5 117,756.5 147,786.5 117,816.5" style="fill:#ce93d8; stroke:#444; stroke-width:1"></polygon>
            <title>(options.framework)</title>
            <text x="162" y="791.5" font-family="monospace" font-size="13" fill="#222">
                <tspan x="162" y="791.5">(options.framework)</tspan>
            </text>
            
            <text x="109.2" y="791.5" font-family="monospace" font-size="13" fill="#222">if</text> <text x="124.8" y="818.45" font-family="monospace" font-size="13" fill="#222">+</text> <text x="329.09999999999997" y="784.55" font-family="monospace" font-size="13" fill="#222">-</text>
        </g>
                <g>
                   <rect x="137" y="826.5" width="342" height="30" rx="3" ry="3" style="fill:#90caf9; stroke:#444; stroke-width:1"></rect>
                   <title>Agent = require(options.framework).Agent</title>
            <text x="152" y="846.5" font-family="monospace" font-size="13" fill="#222">
                <tspan x="152" y="846.5">Agent = require(options.framework).Agent</tspan>
            </text>
                   
                   
                </g>
                <g>
                   <rect x="174" y="875" width="232.79999999999998" height="30" rx="2" ry="2" style="fill:#C5E1A5; stroke:#444; stroke-width:1"></rect>
                   <title>require(options.framework)</title>
            <text x="189" y="895" font-family="monospace" font-size="13" fill="#222">
                <tspan x="189" y="895">require(options.framework)</tspan>
            </text>
                   
                   
                </g>
                <g>
                   <rect x="137" y="923.5" width="443.4" height="30" rx="3" ry="3" style="fill:#90caf9; stroke:#444; stroke-width:1"></rect>
                   <title>Application = require(options.framework).Application</title>
            <text x="152" y="943.5" font-family="monospace" font-size="13" fill="#222">
                <tspan x="152" y="943.5">Application = require(options.framework).Applicati...</tspan>
            </text>
                   
                   
                </g>
                <g>
                   <rect x="174" y="972" width="232.79999999999998" height="30" rx="2" ry="2" style="fill:#C5E1A5; stroke:#444; stroke-width:1"></rect>
                   <title>require(options.framework)</title>
            <text x="189" y="992" font-family="monospace" font-size="13" fill="#222">
                <tspan x="189" y="992">require(options.framework)</tspan>
            </text>
                   
                   
                </g>
                <g>
                   <rect x="640.4" y="826.5" width="326.4" height="30" rx="3" ry="3" style="fill:#90caf9; stroke:#444; stroke-width:1"></rect>
                   <title>Application = require('./application')</title>
            <text x="655.4" y="846.5" font-family="monospace" font-size="13" fill="#222">
                <tspan x="655.4" y="846.5">Application = require('./application')</tspan>
            </text>
                   
                   
                </g>
                <g>
                   <rect x="640.4" y="875" width="232.79999999999998" height="30" rx="3" ry="3" style="fill:#90caf9; stroke:#444; stroke-width:1"></rect>
                   <title>Agent = require('./agent')</title>
            <text x="655.4" y="895" font-family="monospace" font-size="13" fill="#222">
                <tspan x="655.4" y="895">Agent = require('./agent')</tspan>
            </text>
                   
                   
                </g>
                <g>
                   <rect x="87" y="1022" width="396.59999999999997" height="30" rx="3" ry="3" style="fill:#90caf9; stroke:#444; stroke-width:1"></rect>
                   <title>const agent = Agent(Object.assign({}, options))</title>
            <text x="102" y="1042" font-family="monospace" font-size="13" fill="#222">
                <tspan x="102" y="1042">const agent = Agent(Object.assign({}, options))</tspan>
            </text>
                   
                   
                </g>
                <g>
                   <rect x="87" y="1070.5" width="131.39999999999998" height="30" rx="2" ry="2" style="fill:#C5E1A5; stroke:#444; stroke-width:1"></rect>
                   <title>agent.ready()</title>
            <text x="102" y="1090.5" font-family="monospace" font-size="13" fill="#222">
                <tspan x="102" y="1090.5">agent.ready()</tspan>
            </text>
                   
                   
                </g>
                <g>
                   <rect x="87" y="1119" width="443.4" height="30" rx="3" ry="3" style="fill:#90caf9; stroke:#444; stroke-width:1"></rect>
                   <title>const application = Application(Object.assign({}, options))</title>
            <text x="102" y="1139" font-family="monospace" font-size="13" fill="#222">
                <tspan x="102" y="1139">const application = Application(Object.assign({}, ...</tspan>
            </text>
                   
                   
                </g>
                <g>
                   <rect x="87" y="1167.5" width="225" height="30" rx="3" ry="3" style="fill:#90caf9; stroke:#444; stroke-width:1"></rect>
                   <title>application.agent = agent</title>
            <text x="102" y="1187.5" font-family="monospace" font-size="13" fill="#222">
                <tspan x="102" y="1187.5">application.agent = agent</tspan>
            </text>
                   
                   
                </g>
                <g>
                   <rect x="87" y="1216" width="271.79999999999995" height="30" rx="3" ry="3" style="fill:#90caf9; stroke:#444; stroke-width:1"></rect>
                   <title>agent.application = application</title>
            <text x="102" y="1236" font-family="monospace" font-size="13" fill="#222">
                <tspan x="102" y="1236">agent.application = application</tspan>
            </text>
                   
                   
                </g>
                <g>
                   <rect x="87" y="1264.5" width="178.2" height="30" rx="2" ry="2" style="fill:#C5E1A5; stroke:#444; stroke-width:1"></rect>
                   <title>application.ready()</title>
            <text x="102" y="1284.5" font-family="monospace" font-size="13" fill="#222">
                <tspan x="102" y="1284.5">application.ready()</tspan>
            </text>
                   
                   
                </g>
                <g>
                   <rect x="87" y="1313" width="373.2" height="30" rx="2" ry="2" style="fill:#C5E1A5; stroke:#444; stroke-width:1"></rect>
                   <title>application.messenger.broadcast('egg-ready')</title>
            <text x="102" y="1333" font-family="monospace" font-size="13" fill="#222">
                <tspan x="102" y="1333">application.messenger.broadcast('egg-ready')</tspan>
            </text>
                   
                   
                </g>
            <g>
                <rect x="87" y="1361.5" width="170.4" height="30" rx="3" ry="3" style="fill:#90caf9; stroke:#444; stroke-width:1"></rect>
                
                <line x1="257.4" y1="1371.5" x2="262.4" y2="1371.5" style="fill:#a5d6a7; stroke:#444; stroke-width:1"></line>
                
                <line x1="257.4" y1="1381.5" x2="262.4" y2="1381.5" style="fill:#a5d6a7; stroke:#444; stroke-width:1"></line>

                <path d="M262.4, 1365.5 L278.4, 1376.5 L262.4, 1387.5 Z" fill="#a5d6a7" stroke="#444" stroke-width="1"></path>
                             
                <title>return application</title>
            <text x="102" y="1381.5" font-family="monospace" font-size="13" fill="#222">
                <tspan x="102" y="1381.5">return application</tspan>
            </text>
                
            </g>
            <g>
               <rect x="25" y="13.75" width="216.6" height="24" style="fill:#fff59d; stroke:#444; stroke-width:1"></rect>
               <circle cx="25" cy="25" r="15" style="fill:#fff59d; stroke:#444; stroke-width:1"></circle>
               <title>Program: source module</title>
            <text x="55" y="30" font-family="monospace" font-size="13" fill="#222">
                <tspan x="55" y="30">Program: source module</tspan>
            </text>
            </g>
            <g>
               <path d="M25, 40 L25 76 Q25 80
                29 80
                L42 80 " style="fill:none; stroke:#444; stroke-width:1"></path>
               <path d="M42, 77 L50, 80 L42, 83 Z" fill="#333"></path>
            </g>
            <g>
               <path d="M25, 40 L25 139.5 Q25 143.5
                29 143.5
                L42 143.5 " style="fill:none; stroke:#444; stroke-width:1"></path>
               <path d="M42, 140.5 L50, 143.5 L42, 146.5 Z" fill="#333"></path>
            </g>
            <g>
               <path d="M68.5, 158.5 L68.5 203 Q68.5 207
                72.5 207
                L79 207 " style="fill:none; stroke:#444; stroke-width:1"></path>
               <path d="M79, 204 L87, 207 L79, 210 Z" fill="#333"></path>
            </g>
            <g>
               <path d="M117, 237 L117 258 Q117 262
                121 262
                L129 262 " style="fill:none; stroke:#444; stroke-width:1"></path>
               <path d="M129, 259 L137, 262 L129, 265 Z" fill="#333"></path>
            </g>
            <g>
               <path d="M68.5, 158.5 L68.5 308 Q68.5 312
                72.5 312
                L79 312 " style="fill:none; stroke:#444; stroke-width:1"></path>
               <path d="M79, 309 L87, 312 L79, 315 Z" fill="#333"></path>
            </g>
            <g>
               <path d="M105.5, 327 L105.5 356.5 Q105.5 360.5
                109.5 360.5
                L116 360.5 " style="fill:none; stroke:#444; stroke-width:1"></path>
               <path d="M116, 357.5 L124, 360.5 L116, 363.5 Z" fill="#333"></path>
            </g>
            <g>
               <path d="M68.5, 158.5 L68.5 405 Q68.5 409
                72.5 409
                L79 409 " style="fill:none; stroke:#444; stroke-width:1"></path>
               <path d="M79, 406 L87, 409 L79, 412 Z" fill="#333"></path>
            </g>
            <g>
               <path d="M68.5, 158.5 L68.5 468.5 Q68.5 472.5
                72.5 472.5
                L79 472.5 " style="fill:none; stroke:#444; stroke-width:1"></path>
               <path d="M79, 469.5 L87, 472.5 L79, 475.5 Z" fill="#333"></path>
            </g>
            <g>
               <path d="M117, 502.5 L117 523.5 Q117 527.5
                121 527.5
                L129 527.5 " style="fill:none; stroke:#444; stroke-width:1"></path>
               <path d="M129, 524.5 L137, 527.5 L129, 530.5 Z" fill="#333"></path>
            </g>
            <g>
               <path d="M155.5, 542.5 L155.5 572 Q155.5 576
                159.5 576
                L166 576 " style="fill:none; stroke:#444; stroke-width:1"></path>
               <path d="M166, 573 L174, 576 L166, 579 Z" fill="#333"></path>
            </g>
            <g>
               <path d="M192.5, 591 L192.5 620.5 Q192.5 624.5
                196.5 624.5
                L203 624.5 " style="fill:none; stroke:#444; stroke-width:1"></path>
               <path d="M203, 621.5 L211, 624.5 L203, 627.5 Z" fill="#333"></path>
            </g>
            <g>
               <path d="M155.5, 542.5 L155.5 669 Q155.5 673
                159.5 673
                L166 673 " style="fill:none; stroke:#444; stroke-width:1"></path>
               <path d="M166, 670 L174, 673 L166, 676 Z" fill="#333"></path>
            </g>
            <g>
               <path d="M192.5, 688 L192.5 717.5 Q192.5 721.5
                196.5 721.5
                L203 721.5 " style="fill:none; stroke:#444; stroke-width:1"></path>
               <path d="M203, 718.5 L211, 721.5 L203, 724.5 Z" fill="#333"></path>
            </g>
            <g>
               <path d="M68.5, 158.5 L68.5 782.5 Q68.5 786.5
                72.5 786.5
                L79 786.5 " style="fill:none; stroke:#444; stroke-width:1"></path>
               <path d="M79, 783.5 L87, 786.5 L79, 789.5 Z" fill="#333"></path>
            </g>
            <g>
               <path d="M117, 816.5 L117 837.5 Q117 841.5
                121 841.5
                L129 841.5 " style="fill:none; stroke:#444; stroke-width:1"></path>
               <path d="M129, 838.5 L137, 841.5 L129, 844.5 Z" fill="#333"></path>
            </g>
            <g>
               <path d="M155.5, 856.5 L155.5 886 Q155.5 890
                159.5 890
                L166 890 " style="fill:none; stroke:#444; stroke-width:1"></path>
               <path d="M166, 887 L174, 890 L166, 893 Z" fill="#333"></path>
            </g>
            <g>
               <path d="M117, 816.5 L117 934.5 Q117 938.5
                121 938.5
                L129 938.5 " style="fill:none; stroke:#444; stroke-width:1"></path>
               <path d="M129, 935.5 L137, 938.5 L129, 941.5 Z" fill="#333"></path>
            </g>
            <g>
               <path d="M155.5, 953.5 L155.5 983 Q155.5 987
                159.5 987
                L166 987 " style="fill:none; stroke:#444; stroke-width:1"></path>
               <path d="M166, 984 L174, 987 L166, 990 Z" fill="#333"></path>
            </g>
            <g>
               <path d="M325.2, 786.5 L616.4 786.5  Q620.4 786.5
                620.4 790.5
                L620.4 833.5 Q620.4 841.5
                624.4 841.5
                L632.4 841.5 " style="fill:none; stroke:#444; stroke-width:1"></path>
               <path d="M632.4, 838.5 L640.4, 841.5 L632.4, 844.5 Z" fill="#333"></path>
            </g>
            <g>
               <path d="M325.2, 786.5 L616.4 786.5  Q620.4 786.5
                620.4 790.5
                L620.4 882 Q620.4 890
                624.4 890
                L632.4 890 " style="fill:none; stroke:#444; stroke-width:1"></path>
               <path d="M632.4, 887 L640.4, 890 L632.4, 893 Z" fill="#333"></path>
            </g>
            <g>
               <path d="M68.5, 158.5 L68.5 1033 Q68.5 1037
                72.5 1037
                L79 1037 " style="fill:none; stroke:#444; stroke-width:1"></path>
               <path d="M79, 1034 L87, 1037 L79, 1040 Z" fill="#333"></path>
            </g>
            <g>
               <path d="M68.5, 158.5 L68.5 1081.5 Q68.5 1085.5
                72.5 1085.5
                L79 1085.5 " style="fill:none; stroke:#444; stroke-width:1"></path>
               <path d="M79, 1082.5 L87, 1085.5 L79, 1088.5 Z" fill="#333"></path>
            </g>
            <g>
               <path d="M68.5, 158.5 L68.5 1130 Q68.5 1134
                72.5 1134
                L79 1134 " style="fill:none; stroke:#444; stroke-width:1"></path>
               <path d="M79, 1131 L87, 1134 L79, 1137 Z" fill="#333"></path>
            </g>
            <g>
               <path d="M68.5, 158.5 L68.5 1178.5 Q68.5 1182.5
                72.5 1182.5
                L79 1182.5 " style="fill:none; stroke:#444; stroke-width:1"></path>
               <path d="M79, 1179.5 L87, 1182.5 L79, 1185.5 Z" fill="#333"></path>
            </g>
            <g>
               <path d="M68.5, 158.5 L68.5 1227 Q68.5 1231
                72.5 1231
                L79 1231 " style="fill:none; stroke:#444; stroke-width:1"></path>
               <path d="M79, 1228 L87, 1231 L79, 1234 Z" fill="#333"></path>
            </g>
            <g>
               <path d="M68.5, 158.5 L68.5 1275.5 Q68.5 1279.5
                72.5 1279.5
                L79 1279.5 " style="fill:none; stroke:#444; stroke-width:1"></path>
               <path d="M79, 1276.5 L87, 1279.5 L79, 1282.5 Z" fill="#333"></path>
            </g>
            <g>
               <path d="M68.5, 158.5 L68.5 1324 Q68.5 1328
                72.5 1328
                L79 1328 " style="fill:none; stroke:#444; stroke-width:1"></path>
               <path d="M79, 1325 L87, 1328 L79, 1331 Z" fill="#333"></path>
            </g>
            <g>
               <path d="M68.5, 158.5 L68.5 1372.5 Q68.5 1376.5
                72.5 1376.5
                L79 1376.5 " style="fill:none; stroke:#444; stroke-width:1"></path>
               <path d="M79, 1373.5 L87, 1376.5 L79, 1379.5 Z" fill="#333"></path>
            </g>
            </svg>